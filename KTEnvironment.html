<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: KTEnvironment
  
    &mdash; Katello
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (K)</a> &raquo;
    
    
    <span class="title">KTEnvironment</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: KTEnvironment
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">KTEnvironment</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2">Authorization::Environment, <span class='object_link'><a href="Ext/LabelFromName.html" title="Ext::LabelFromName (module)">Ext::LabelFromName</a></span>, <span class='object_link'><a href="Ext/PermissionTagCleanup.html" title="Ext::PermissionTagCleanup (module)">Ext::PermissionTagCleanup</a></span>, <span class='object_link'><a href="Glue.html" title="Glue (module)">Glue</a></span>, <span class='object_link'><a href="Glue/ElasticSearch/Environment.html" title="Glue::ElasticSearch::Environment (module)">Glue::ElasticSearch::Environment</a></span>, <span class='object_link'><a href="Glue/Event.html" title="Glue::Event (module)">Glue::Event</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">
      <a href="https://github.com/Katello/katello/tree/master/app/models/kt_environment.rb" target="_blank">
        app/models/kt_environment.rb
      </a>
    </dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Copyright 2013 Red Hat, Inc.</p>

<p>This software is licensed to you under the GNU General Public
License as published by the Free Software Foundation; either version
2 of the License (GPLv2) or (at your option) any later version.
There is NO WARRANTY for this software, express or implied,
including the implied warranties of MERCHANTABILITY,
NON-INFRINGEMENT, or FITNESS FOR A PARTICULAR PURPOSE. You should
have received a copy of GPLv2 along with this software; if not, see
<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt</a>.</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ERROR_CLASS_NAME-constant" class="">ERROR_CLASS_NAME =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Environment</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Belongs to
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organization-instance_method" title="#organization (instance method)">- (Organization) <strong>organization</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Has many
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#activation_keys-instance_method" title="#activation_keys (instance method)">- (Array&lt;ActivationKey&gt;) <strong>activation_keys</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#changeset_history-instance_method" title="#changeset_history (instance method)">- (Array&lt;ChangesetHistory&gt;) <strong>changeset_history</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_view_environments-instance_method" title="#content_view_environments (instance method)">- (Array&lt;ContentViewEnvironment&gt;) <strong>content_view_environments</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_view_version_environments-instance_method" title="#content_view_version_environments (instance method)">- (Array&lt;ContentViewVersionEnvironment&gt;) <strong>content_view_version_environments</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_view_versions-instance_method" title="#content_view_versions (instance method)">- (Array&lt;ContentViewVersion&gt;) <strong>content_view_versions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#distributors-instance_method" title="#distributors (instance method)">- (Array&lt;Distributor&gt;) <strong>distributors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#environment_products-instance_method" title="#environment_products (instance method)">- (Array&lt;EnvironmentProduct&gt;) <strong>environment_products</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#products-instance_method" title="#products (instance method)">- (Array&lt;Product&gt;) <strong>products</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repositories-instance_method" title="#repositories (instance method)">- (Array&lt;Repository&gt;) <strong>repositories</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#systems-instance_method" title="#systems (instance method)">- (Array&lt;System&gt;) <strong>systems</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#users-instance_method" title="#users (instance method)">- (Array&lt;User&gt;) <strong>users</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#working_changesets-instance_method" title="#working_changesets (instance method)">- (Array&lt;Changeset&gt;) <strong>working_changesets</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#working_deletion_changesets-instance_method" title="#working_deletion_changesets (instance method)">- (Array&lt;DeletionChangeset&gt;) <strong>working_deletion_changesets</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#working_promotion_changesets-instance_method" title="#working_promotion_changesets (instance method)">- (Array&lt;PromotionChangeset&gt;) <strong>working_promotion_changesets</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Has and belongs to many
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#priors-instance_method" title="#priors (instance method)">- (Array&lt;KTEnvironment&gt;) <strong>priors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#successors-instance_method" title="#successors (instance method)">- (Array&lt;KTEnvironment&gt;) <strong>successors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completer_scope-class_method" title="completer_scope (class method)">+ (Array&lt;KTEnvironment&gt;) <strong>completer_scope</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>An array of KTEnvironments that are completer scope.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_tags-class_method" title="list_tags (class method)">+ (Object) <strong>list_tags</strong>(org_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>returns list of virtual permission tags for the current user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tags-class_method" title="tags (class method)">+ (Object) <strong>tags</strong>(ids) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">- (Object) <strong>as_json</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available_products-instance_method" title="#available_products (instance method)">- (Object) <strong>available_products</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available_releases-instance_method" title="#available_releases (instance method)">- (Object) <strong>available_releases</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Katello, which understands repository content and promotion, provides release versions based upon
enabled repos.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confirm_last_env-instance_method" title="#confirm_last_env (instance method)">- (Object) <strong>confirm_last_env</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_view_environment-instance_method" title="#content_view_environment (instance method)">- (Object) <strong>content_view_environment</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_views-instance_method" title="#content_views (instance method)">- (Object) <strong>content_views</strong>(reload = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_default_content_view_version-instance_method" title="#create_default_content_view_version (instance method)">- (Object) <strong>create_default_content_view_version</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_event-instance_method" title="#create_event (instance method)">- (Object) <strong>create_event</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_content_view-instance_method" title="#default_content_view (instance method)">- (Object) <strong>default_content_view</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_content_view_version-instance_method" title="#default_content_view_version (instance method)">- (Object) <strong>default_content_view_version</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_default_view_version-instance_method" title="#delete_default_view_version (instance method)">- (Object) <strong>delete_default_view_version</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_event-instance_method" title="#destroy_event (instance method)">- (Object) <strong>destroy_event</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_name-instance_method" title="#display_name (instance method)">- (Object) <strong>display_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_latest_packages_by_name-instance_method" title="#find_latest_packages_by_name (instance method)">- (Object) <strong>find_latest_packages_by_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_packages_by_name-instance_method" title="#find_packages_by_name (instance method)">- (Object) <strong>find_packages_by_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_packages_by_nvre-instance_method" title="#find_packages_by_nvre (instance method)">- (Object) <strong>find_packages_by_nvre</strong>(name, version, release, epoch) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_path-instance_method" title="#full_path (instance method)">- (Object) <strong>full_path</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unlike path which only gives the path from this environment going forward.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_distribution-instance_method" title="#get_distribution (instance method)">- (Object) <strong>get_distribution</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key_for-instance_method" title="#key_for (instance method)">- (Object) <strong>key_for</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#library%3F-instance_method" title="#library? (instance method)">- (Boolean) <strong>library?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#package_group_categories-instance_method" title="#package_group_categories (instance method)">- (Object) <strong>package_group_categories</strong>(search_args = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#package_groups-instance_method" title="#package_groups (instance method)">- (Object) <strong>package_groups</strong>(search_args = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#path-instance_method" title="#path (instance method)">- (Object) <strong>path</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prior-instance_method" title="#prior (instance method)">- (Object) <strong>prior</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prior%3D-instance_method" title="#prior= (instance method)">- (Object) <strong>prior=</strong>(env_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#promoting-instance_method" title="#promoting (instance method)">- (Object) <strong>promoting</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>list changesets promoting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#promoting_to%3F-instance_method" title="#promoting_to? (instance method)">- (Boolean) <strong>promoting_to?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>is the environment currently being promoted to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#successor-instance_method" title="#successor (instance method)">- (Object) <strong>successor</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unset_users_with_default-instance_method" title="#unset_users_with_default (instance method)">- (Object) <strong>unset_users_with_default</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Ext/PermissionTagCleanup.html" title="Ext::PermissionTagCleanup (module)">Ext::PermissionTagCleanup</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Ext/PermissionTagCleanup.html#delete_associated_permission_tags-instance_method" title="Ext::PermissionTagCleanup#delete_associated_permission_tags (method)">#delete_associated_permission_tags</a></span>, <span class='object_link'><a href="Ext/PermissionTagCleanup.html#delete_organization_associated_permission_tags-instance_method" title="Ext::PermissionTagCleanup#delete_organization_associated_permission_tags (method)">#delete_organization_associated_permission_tags</a></span>, <span class='object_link'><a href="Ext/PermissionTagCleanup.html#included-class_method" title="Ext::PermissionTagCleanup.included (method)">included</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Ext/LabelFromName.html" title="Ext::LabelFromName (module)">Ext::LabelFromName</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Ext/LabelFromName.html#included-class_method" title="Ext::LabelFromName.included (method)">included</a></span>, <span class='object_link'><a href="Ext/LabelFromName.html#setup_label_from_name-instance_method" title="Ext::LabelFromName#setup_label_from_name (method)">#setup_label_from_name</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Glue/Event.html" title="Glue::Event (module)">Glue::Event</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Glue/Event.html#included-class_method" title="Glue::Event.included (method)">included</a></span>, <span class='object_link'><a href="Glue/Event.html#trigger-class_method" title="Glue::Event.trigger (method)">trigger</a></span>, <span class='object_link'><a href="Glue/Event.html#trigger_create_event-instance_method" title="Glue::Event#trigger_create_event (method)">#trigger_create_event</a></span>, <span class='object_link'><a href="Glue/Event.html#trigger_destroy_event-instance_method" title="Glue::Event#trigger_destroy_event (method)">#trigger_destroy_event</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Glue.html" title="Glue (module)">Glue</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Glue.html#included-class_method" title="Glue.included (method)">included</a></span>, <span class='object_link'><a href="Glue.html#logger-class_method" title="Glue.logger (method)">logger</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Glue/ElasticSearch/Environment.html" title="Glue::ElasticSearch::Environment (module)">Glue::ElasticSearch::Environment</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Glue/ElasticSearch/Environment.html#delete_related_index-instance_method" title="Glue::ElasticSearch::Environment#delete_related_index (method)">#delete_related_index</a></span>, <span class='object_link'><a href="Glue/ElasticSearch/Environment.html#included-class_method" title="Glue::ElasticSearch::Environment.included (method)">included</a></span>, <span class='object_link'><a href="Glue/ElasticSearch/Environment.html#update_related_index-instance_method" title="Glue::ElasticSearch::Environment#update_related_index (method)">#update_related_index</a></span></p>

  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="completer_scope-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>) <strong>completer_scope</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>An array of KTEnvironments that are completer scope. <strong>Active Record Scope</strong></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/NamedScope/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 67</span>

<span class='id identifier rubyid_scope'>scope</span> <span class='symbol'>:completer_scope</span><span class='comma'>,</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_options'>options</span><span class='op'>|</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>organization_id = ?</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:organization_id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_tags-class_method">
  
    + (<tt>Object</tt>) <strong>list_tags</strong>(org_id) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>returns list of virtual permission tags for the current user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 206</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_list_tags'>list_tags</span> <span class='id identifier rubyid_org_id'>org_id</span>
  <span class='const'>KTEnvironment</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:organization_id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_org_id'>org_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='const'>VirtualTag</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tags-class_method">
  
    + (<tt>Object</tt>) <strong>tags</strong>(ids) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 210</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tags'>tags</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='rparen'>)</span>
  <span class='const'>KTEnvironment</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ids'>ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='const'>VirtualTag</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="activation_keys-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="ActivationKey.html" title="ActivationKey (class)">ActivationKey</a></span>&gt;</tt>) <strong>activation_keys</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ActivationKey.html" title="ActivationKey (class)">ActivationKey</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 37</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:activation_keys</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="as_json-instance_method">
  
    - (<tt>Object</tt>) <strong>as_json</strong>(options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>prior</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span> <span class='op'>&amp;&amp;</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>prior_id</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span> <span class='op'>&amp;&amp;</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>organization</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span> <span class='op'>&amp;&amp;</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_to_ret'>to_ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available_products-instance_method">
  
    - (<tt>Object</tt>) <strong>available_products</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available_products'>available_products</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span>
    <span class='comment'># if there is no prior, then the prior is the Library, which has all products
</span>    <span class='id identifier rubyid_prior_products'>prior_products</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_prior_products'>prior_products</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_prior_products'>prior_products</span> <span class='op'>-</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available_releases-instance_method">
  
    - (<tt>Object</tt>) <strong>available_releases</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Katello, which understands repository content and promotion, provides release versions based upon
enabled repos. Headpin, which does not traverse products to the repo level, exposes all release
versions in the manifest.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281
282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available_releases'>available_releases</span>
  <span class='kw'>if</span> <span class='const'>Katello</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_katello?'>katello?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_repositories'>repositories</span><span class='period'>.</span><span class='id identifier rubyid_enabled'>enabled</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:minor</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_redhat_provider'>redhat_provider</span><span class='period'>.</span><span class='id identifier rubyid_available_releases'>available_releases</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="changeset_history-instance_method">
  
    - (<tt>Array&lt;ChangesetHistory&gt;</tt>) <strong>changeset_history</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;ChangesetHistory&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 59</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:changeset_history</span><span class='comma'>,</span> <span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:state</span> <span class='op'>=&gt;</span> <span class='const'>Changeset</span><span class='op'>::</span><span class='const'>PROMOTED</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:class_name</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Changeset</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confirm_last_env-instance_method">
  
    - (<tt>Object</tt>) <strong>confirm_last_env</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirm_last_env'>confirm_last_env</span>
  <span class='comment'># when deleting env while org is deleted, self.organization is nil (and we
</span>  <span class='comment'># can't do this logic properly)
</span>  <span class='comment'># we don't have to check this anyway, all environments will be destroyed
</span>  <span class='comment'># with the org.
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_successor'>successor</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='symbol'>:base</span><span class='comma'>,</span>
             <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Environment %s has a successor.  Only the last environment on a path can be deleted</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_view_environment-instance_method">
  
    - (<tt>Object</tt>) <strong>content_view_environment</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_view_environment'>content_view_environment</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view'>default_content_view</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view'>default_content_view</span><span class='period'>.</span><span class='id identifier rubyid_content_view_environments'>content_view_environments</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:environment_id</span><span class='op'>=&gt;</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_view_environments-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="ContentViewEnvironment.html" title="ContentViewEnvironment (class)">ContentViewEnvironment</a></span>&gt;</tt>) <strong>content_view_environments</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ContentViewEnvironment.html" title="ContentViewEnvironment (class)">ContentViewEnvironment</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 63</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:content_view_environments</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span><span class='op'>=&gt;</span><span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span><span class='op'>=&gt;</span><span class='symbol'>:environment</span><span class='comma'>,</span> <span class='symbol'>:dependent</span><span class='op'>=&gt;</span><span class='symbol'>:destroy</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_view_version_environments-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="ContentViewVersionEnvironment.html" title="ContentViewVersionEnvironment (class)">ContentViewVersionEnvironment</a></span>&gt;</tt>) <strong>content_view_version_environments</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ContentViewVersionEnvironment.html" title="ContentViewVersionEnvironment (class)">ContentViewVersionEnvironment</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 61</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:content_view_version_environments</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span><span class='op'>=&gt;</span><span class='symbol'>:environment_id</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_view_versions-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="ContentViewVersion.html" title="ContentViewVersion (class)">ContentViewVersion</a></span>&gt;</tt>) <strong>content_view_versions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ContentViewVersion.html" title="ContentViewVersion (class)">ContentViewVersion</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 62</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:content_view_versions</span><span class='comma'>,</span> <span class='symbol'>:through</span><span class='op'>=&gt;</span><span class='symbol'>:content_view_version_environments</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span><span class='op'>=&gt;</span><span class='symbol'>:environments</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_views-instance_method">
  
    - (<tt>Object</tt>) <strong>content_views</strong>(reload = false) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_views'>content_views</span><span class='lparen'>(</span><span class='id identifier rubyid_reload'>reload</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@content_views</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_reload'>reload</span>
  <span class='ivar'>@content_views</span> <span class='op'>||=</span> <span class='const'>ContentView</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:content_view_versions</span> <span class='op'>=&gt;</span> <span class='symbol'>:content_view_version_environments</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content_view_version_environments.environment_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_default_content_view_version-instance_method">
  
    - (<tt>Object</tt>) <strong>create_default_content_view_version</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_default_content_view_version'>create_default_content_view_version</span>
  <span class='comment'>#Sadly this has to be created here, if it is created in the org
</span>  <span class='comment'>#  it will not actually exist when we go to create library and so
</span>  <span class='comment'>#  we can't look it up via a query (org.default_content_view)
</span>  <span class='id identifier rubyid_content_view'>content_view</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view'>default_content_view</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_content_view'>content_view</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_content_view'>content_view</span> <span class='op'>=</span> <span class='const'>ContentView</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:default</span><span class='op'>=&gt;</span><span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Default Organization View</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                   <span class='symbol'>:organization</span><span class='op'>=&gt;</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_content_view'>content_view</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='const'>ContentViewVersion</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:content_view</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_content_view'>content_view</span><span class='comma'>,</span>
                                     <span class='symbol'>:version</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_environments'>environments</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
    <span class='id identifier rubyid_content_view'>content_view</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span> <span class='comment'>#save content_view, since ContentViewEnvironment was added
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_event-instance_method">
  
    - (<tt>Object</tt>) <strong>create_event</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_event'>create_event</span>
  <span class='const'>Katello</span><span class='op'>::</span><span class='const'>Actions</span><span class='op'>::</span><span class='const'>EnvironmentCreate</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_content_view-instance_method">
  
    - (<tt>Object</tt>) <strong>default_content_view</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_content_view'>default_content_view</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view_version'>default_content_view_version</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:content_view</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_content_view_version-instance_method">
  
    - (<tt>Object</tt>) <strong>default_content_view_version</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_content_view_version'>default_content_view_version</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view'>default_content_view</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view'>default_content_view</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_default_view_version-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_default_view_version</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_default_view_version'>delete_default_view_version</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_content_view_version'>default_content_view_version</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy_event-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy_event</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy_event'>destroy_event</span>
  <span class='const'>Katello</span><span class='op'>::</span><span class='const'>Actions</span><span class='op'>::</span><span class='const'>EnvironmentDestroy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_name-instance_method">
  
    - (<tt>Object</tt>) <strong>display_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display_name'>display_name</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="distributors-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="Distributor.html" title="Distributor (class)">Distributor</a></span>&gt;</tt>) <strong>distributors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Distributor.html" title="Distributor (class)">Distributor</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 53</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:distributors</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span>  <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="environment_products-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="EnvironmentProduct.html" title="EnvironmentProduct (class)">EnvironmentProduct</a></span>&gt;</tt>) <strong>environment_products</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="EnvironmentProduct.html" title="EnvironmentProduct (class)">EnvironmentProduct</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 43</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:environment_products</span><span class='comma'>,</span> <span class='symbol'>:class_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EnvironmentProduct</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:uniq</span><span class='op'>=&gt;</span><span class='kw'>true</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_latest_packages_by_name-instance_method">
  
    - (<tt>Object</tt>) <strong>find_latest_packages_by_name</strong>(name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_latest_packages_by_name'>find_latest_packages_by_name</span> <span class='id identifier rubyid_name'>name</span>

  <span class='id identifier rubyid_packs'>packs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_find_latest_packages_by_name'>find_latest_packages_by_name</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pack'>pack</span><span class='op'>|</span>
      <span class='id identifier rubyid_pack'>pack</span><span class='lbracket'>[</span><span class='symbol'>:product_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span>
      <span class='id identifier rubyid_pack'>pack</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>

  <span class='const'>Util</span><span class='op'>::</span><span class='const'>Package</span><span class='period'>.</span><span class='id identifier rubyid_find_latest_packages'>find_latest_packages</span> <span class='id identifier rubyid_packs'>packs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_packages_by_name-instance_method">
  
    - (<tt>Object</tt>) <strong>find_packages_by_name</strong>(name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 231</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_packages_by_name'>find_packages_by_name</span> <span class='id identifier rubyid_name'>name</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_find_packages_by_name'>find_packages_by_name</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
      <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:product_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span>
      <span class='id identifier rubyid_p'>p</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_packages_by_nvre-instance_method">
  
    - (<tt>Object</tt>) <strong>find_packages_by_nvre</strong>(name, version, release, epoch) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_packages_by_nvre'>find_packages_by_nvre</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_release'>release</span><span class='comma'>,</span> <span class='id identifier rubyid_epoch'>epoch</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_find_packages_by_nvre'>find_packages_by_nvre</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_release'>release</span><span class='comma'>,</span> <span class='id identifier rubyid_epoch'>epoch</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
      <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:product_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span>
      <span class='id identifier rubyid_p'>p</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_path-instance_method">
  
    - (<tt>Object</tt>) <strong>full_path</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Unlike path which only gives the path from this environment going forward
 Get the full path, that is go to the HEAD of the path this environment is on
 and then give me that entire path</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_path'>full_path</span>
  <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='kw'>until</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span>
    <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_prior'>prior</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_distribution-instance_method">
  
    - (<tt>Object</tt>) <strong>get_distribution</strong>(id) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_distribution'>get_distribution</span> <span class='id identifier rubyid_id'>id</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_get_distribution'>get_distribution</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="key_for-instance_method">
  
    - (<tt>Object</tt>) <strong>key_for</strong>(item) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_key_for'>key_for</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="library?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>library?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_library?'>library?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_library'>library</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organization-instance_method">
  
    - (<tt><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></tt>) <strong>organization</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Organization.html" title="Organization (class)">Organization</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 36</span>

<span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbol'>:organization</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environments</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="package_group_categories-instance_method">
  
    - (<tt>Object</tt>) <strong>package_group_categories</strong>(search_args = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_package_group_categories'>package_group_categories</span> <span class='id identifier rubyid_search_args'>search_args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_categories'>categories</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_categories'>categories</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_package_group_categories'>package_group_categories</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_search_args'>search_args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_categories'>categories</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="package_groups-instance_method">
  
    - (<tt>Object</tt>) <strong>package_groups</strong>(search_args = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_package_groups'>package_groups</span> <span class='id identifier rubyid_search_args'>search_args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_products'>products</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prod'>prod</span><span class='op'>|</span>
    <span class='id identifier rubyid_groups'>groups</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prod'>prod</span><span class='period'>.</span><span class='id identifier rubyid_package_groups'>package_groups</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_search_args'>search_args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="path-instance_method">
  
    - (<tt>Object</tt>) <strong>path</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_successor'>successor</span>
  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
  <span class='kw'>until</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Environment path has duplicates!!. </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='rbrace'>}</span><span class='tstring_content'>. Duplicate =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ret'>ret</span><span class='rbrace'>}</span><span class='tstring_content'>. Path =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ret'>ret</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_s'>s</span>
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s'>s</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_successor'>successor</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prior-instance_method">
  
    - (<tt>Object</tt>) <strong>prior</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prior'>prior</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_priors'>priors</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prior=-instance_method">
  
    - (<tt>Object</tt>) <strong>prior=</strong>(env_id) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prior='>prior=</span><span class='lparen'>(</span><span class='id identifier rubyid_env_id'>env_id</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_priors'>priors</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_env_id'>env_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_env_id'>env_id</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_prior_env'>prior_env</span> <span class='op'>=</span> <span class='const'>KTEnvironment</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='id identifier rubyid_env_id'>env_id</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_priors'>priors</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_prior_env'>prior_env</span> <span class='kw'>unless</span> <span class='id identifier rubyid_prior_env'>prior_env</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="priors-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>) <strong>priors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 38</span>

<span class='id identifier rubyid_has_and_belongs_to_many'>has_and_belongs_to_many</span> <span class='symbol'>:priors</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:class_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>KTEnvironment</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span>
<span class='symbol'>:join_table</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment_priors</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:association_foreign_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prior_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:uniq</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="products-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="Product.html" title="Product (class)">Product</a></span>&gt;</tt>) <strong>products</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Product.html" title="Product (class)">Product</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 44</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:products</span><span class='comma'>,</span> <span class='symbol'>:uniq</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:through</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_products</span>  <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
    <span class='kw'>super</span><span class='lparen'>(</span> <span class='id identifier rubyid_items'>items</span> <span class='op'>-</span> <span class='ivar'>@association</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_environment_products'>environment_products</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_ep'>ep</span><span class='op'>|</span> <span class='id identifier rubyid_ep'>ep</span><span class='period'>.</span><span class='id identifier rubyid_product'>product</span><span class='rbrace'>}</span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="promoting-instance_method">
  
    - (<tt>Object</tt>) <strong>promoting</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>list changesets promoting</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_promoting'>promoting</span>
    <span class='const'>Changeset</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:task_status</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>changesets.environment_id</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>task_statuses.state</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='const'>TaskStatus</span><span class='op'>::</span><span class='const'>Status</span><span class='op'>::</span><span class='const'>WAITING</span><span class='comma'>,</span>  <span class='const'>TaskStatus</span><span class='op'>::</span><span class='const'>Status</span><span class='op'>::</span><span class='const'>RUNNING</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="promoting_to?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>promoting_to?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>is the environment currently being promoted to</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_promoting_to?'>promoting_to?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_promoting'>promoting</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="repositories-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="Repository.html" title="Repository (class)">Repository</a></span>&gt;</tt>) <strong>repositories</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Repository.html" title="Repository (class)">Repository</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 50</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:repositories</span><span class='comma'>,</span> <span class='symbol'>:through</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_products</span><span class='comma'>,</span> <span class='symbol'>:source</span> <span class='op'>=&gt;</span> <span class='symbol'>:repositories</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="successor-instance_method">
  
    - (<tt>Object</tt>) <strong>successor</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_successor'>successor</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_successors'>successors</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_library?'>library?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_promotion_paths'>promotion_paths</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span><span class='period'>.</span><span class='id identifier rubyid_promotion_paths'>promotion_paths</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="successors-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>) <strong>successors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="KTEnvironment (class)">KTEnvironment</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 40</span>

<span class='id identifier rubyid_has_and_belongs_to_many'>has_and_belongs_to_many</span> <span class='symbol'>:successors</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:class_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>KTEnvironment</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>prior_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='symbol'>:join_table</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment_priors</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:association_foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:readonly</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="systems-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="System.html" title="System (class)">System</a></span>&gt;</tt>) <strong>systems</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="System.html" title="System (class)">System</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 52</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:systems</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span>  <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt>Object</tt>) <strong>to_s</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_display_name'>display_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unset_users_with_default-instance_method">
  
    - (<tt>Object</tt>) <strong>unset_users_with_default</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


267
268
269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 267</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unset_users_with_default'>unset_users_with_default</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_with_default_environment'>with_default_environment</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span>
    <span class='const'>Notify</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Your default environment has been removed. Please choose another one.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                   <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_u'>u</span><span class='comma'>,</span> <span class='symbol'>:organization</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organization'>organization</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="users-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="User.html" title="User (class)">User</a></span>&gt;</tt>) <strong>users</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="User.html" title="User (class)">User</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 65</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:users</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:default_environment_id</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:default_environment</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:nullify</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="working_changesets-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="Changeset.html" title="Changeset (class)">Changeset</a></span>&gt;</tt>) <strong>working_changesets</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Changeset.html" title="Changeset (class)">Changeset</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 54</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:working_changesets</span><span class='comma'>,</span> <span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>state != '</span><span class='embexpr_beg'>#{</span><span class='const'>Changeset</span><span class='op'>::</span><span class='const'>PROMOTED</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:class_name</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Changeset</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="working_deletion_changesets-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="DeletionChangeset.html" title="DeletionChangeset (class)">DeletionChangeset</a></span>&gt;</tt>) <strong>working_deletion_changesets</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="DeletionChangeset.html" title="DeletionChangeset (class)">DeletionChangeset</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 56</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:working_deletion_changesets</span><span class='comma'>,</span> <span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>state != '</span><span class='embexpr_beg'>#{</span><span class='const'>Changeset</span><span class='op'>::</span><span class='const'>DELETED</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:class_name</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DeletionChangeset</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="working_promotion_changesets-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="PromotionChangeset.html" title="PromotionChangeset (class)">PromotionChangeset</a></span>&gt;</tt>) <strong>working_promotion_changesets</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="PromotionChangeset.html" title="PromotionChangeset (class)">PromotionChangeset</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/kt_environment.rb', line 57</span>

<span class='id identifier rubyid_has_many'>has_many</span> <span class='symbol'>:working_promotion_changesets</span><span class='comma'>,</span> <span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>state != '</span><span class='embexpr_beg'>#{</span><span class='const'>Changeset</span><span class='op'>::</span><span class='const'>PROMOTED</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:foreign_key</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment_id</span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:class_name</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PromotionChangeset</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:dependent</span> <span class='op'>=&gt;</span> <span class='symbol'>:destroy</span><span class='comma'>,</span> <span class='symbol'>:inverse_of</span> <span class='op'>=&gt;</span> <span class='symbol'>:environment</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jun  6 11:24:29 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.1 (ruby-1.9.3).
</div>

  </body>
</html>