<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: SystemPackagesController
  
    &mdash; Katello
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SystemPackagesController</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: SystemPackagesController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">SystemPackagesController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="SortColumnList.html" title="SortColumnList (module)">SortColumnList</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">
      <a href="https://github.com/Katello/katello/tree/master/app/controllers/system_packages_controller.rb" target="_blank">
        app/controllers/system_packages_controller.rb
      </a>
    </dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Copyright 2013 Red Hat, Inc.</p>

<p>This software is licensed to you under the GNU General Public
License as published by the Free Software Foundation; either version
2 of the License (GPLv2) or (at your option) any later version.
There is NO WARRANTY for this software, express or implied,
including the implied warranties of MERCHANTABILITY,
NON-INFRINGEMENT, or FITNESS FOR A PARTICULAR PURPOSE. You should
have received a copy of GPLv2 along with this software; if not, see
<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt</a>.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">- (Object) <strong>add</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#controller_display_name-instance_method" title="#controller_display_name (instance method)">- (Object) <strong>controller_display_name</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#find_system-instance_method" title="#find_system (instance method)">- (Object) <strong>find_system</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#more_packages-instance_method" title="#more_packages (instance method)">- (Object) <strong>more_packages</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#package_status-instance_method" title="#package_status (instance method)">- (Object) <strong>package_status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#packages-instance_method" title="#packages (instance method)">- (Object) <strong>packages</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove-instance_method" title="#remove (instance method)">- (Object) <strong>remove</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rules-instance_method" title="#rules (instance method)">- (Object) <strong>rules</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#section_id-instance_method" title="#section_id (instance method)">- (Object) <strong>section_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#sort_order_limit-instance_method" title="#sort_order_limit (instance method)">- (Object) <strong>sort_order_limit</strong>(systems) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SortColumnList.html" title="SortColumnList (module)">SortColumnList</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SortColumnList.html#sort_columns-instance_method" title="SortColumnList#sort_columns (method)">#sort_columns</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationController.html#check_deleted_org-instance_method" title="ApplicationController#check_deleted_org (method)">#check_deleted_org</a></span>, <span class='object_link'><a href="ApplicationController.html#current_organization-instance_method" title="ApplicationController#current_organization (method)">#current_organization</a></span>, <span class='object_link'><a href="ApplicationController.html#current_organization%3D-instance_method" title="ApplicationController#current_organization= (method)">#current_organization=</a></span>, <span class='object_link'><a href="ApplicationController.html#current_user-instance_method" title="ApplicationController#current_user (method)">#current_user</a></span>, <span class='object_link'><a href="ApplicationController.html#default_label-instance_method" title="ApplicationController#default_label (method)">#default_label</a></span>, <span class='object_link'><a href="ApplicationController.html#default_label_assigned-instance_method" title="ApplicationController#default_label_assigned (method)">#default_label_assigned</a></span>, <span class='object_link'><a href="ApplicationController.html#default_notify_options-instance_method" title="ApplicationController#default_notify_options (method)">#default_notify_options</a></span>, <span class='object_link'><a href="ApplicationController.html#environment_path_element-instance_method" title="ApplicationController#environment_path_element (method)">#environment_path_element</a></span>, <span class='object_link'><a href="ApplicationController.html#environment_paths-instance_method" title="ApplicationController#environment_paths (method)">#environment_paths</a></span>, <span class='object_link'><a href="ApplicationController.html#escape_html-instance_method" title="ApplicationController#escape_html (method)">#escape_html</a></span>, <span class='object_link'><a href="ApplicationController.html#execute_after_filters-instance_method" title="ApplicationController#execute_after_filters (method)">#execute_after_filters</a></span>, <span class='object_link'><a href="ApplicationController.html#execute_rescue-instance_method" title="ApplicationController#execute_rescue (method)">#execute_rescue</a></span>, <span class='object_link'><a href="ApplicationController.html#first_env_in_path-instance_method" title="ApplicationController#first_env_in_path (method)">#first_env_in_path</a></span>, <span class='object_link'><a href="ApplicationController.html#flash_to_headers-instance_method" title="ApplicationController#flash_to_headers (method)">#flash_to_headers</a></span>, <span class='object_link'><a href="ApplicationController.html#format_time-instance_method" title="ApplicationController#format_time (method)">#format_time</a></span>, <span class='object_link'><a href="ApplicationController.html#generate_label-instance_method" title="ApplicationController#generate_label (method)">#generate_label</a></span>, <span class='object_link'><a href="ApplicationController.html#label_overridden-instance_method" title="ApplicationController#label_overridden (method)">#label_overridden</a></span>, <span class='object_link'><a href="ApplicationController.html#library_path_element-instance_method" title="ApplicationController#library_path_element (method)">#library_path_element</a></span>, <span class='object_link'><a href="ApplicationController.html#log_exception-instance_method" title="ApplicationController#log_exception (method)">#log_exception</a></span>, <span class='object_link'><a href="ApplicationController.html#matches_no_redirect%3F-instance_method" title="ApplicationController#matches_no_redirect? (method)">#matches_no_redirect?</a></span>, <span class='object_link'><a href="ApplicationController.html#n_gettext_for_generate_label-instance_method" title="ApplicationController#n_gettext_for_generate_label (method)">#n_gettext_for_generate_label</a></span>, <span class='object_link'><a href="ApplicationController.html#no_env_available_msg-instance_method" title="ApplicationController#no_env_available_msg (method)">#no_env_available_msg</a></span>, <span class='object_link'><a href="ApplicationController.html#org_not_found_error-instance_method" title="ApplicationController#org_not_found_error (method)">#org_not_found_error</a></span>, <span class='object_link'><a href="ApplicationController.html#parse_calendar_date-instance_method" title="ApplicationController#parse_calendar_date (method)">#parse_calendar_date</a></span>, <span class='object_link'><a href="ApplicationController.html#parse_display_message-class_method" title="ApplicationController.parse_display_message (method)">parse_display_message</a></span>, <span class='object_link'><a href="ApplicationController.html#render_403-instance_method" title="ApplicationController#render_403 (method)">#render_403</a></span>, <span class='object_link'><a href="ApplicationController.html#render_404-instance_method" title="ApplicationController#render_404 (method)">#render_404</a></span>, <span class='object_link'><a href="ApplicationController.html#render_bad_parameters-instance_method" title="ApplicationController#render_bad_parameters (method)">#render_bad_parameters</a></span>, <span class='object_link'><a href="ApplicationController.html#render_correct_nav-instance_method" title="ApplicationController#render_correct_nav (method)">#render_correct_nav</a></span>, <span class='object_link'><a href="ApplicationController.html#render_error-instance_method" title="ApplicationController#render_error (method)">#render_error</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_direct-instance_method" title="ApplicationController#render_panel_direct (method)">#render_panel_direct</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_items-instance_method" title="ApplicationController#render_panel_items (method)">#render_panel_items</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_results-instance_method" title="ApplicationController#render_panel_results (method)">#render_panel_results</a></span>, <span class='object_link'><a href="ApplicationController.html#requested_action-instance_method" title="ApplicationController#requested_action (method)">#requested_action</a></span>, <span class='object_link'><a href="ApplicationController.html#require_no_user-instance_method" title="ApplicationController#require_no_user (method)">#require_no_user</a></span>, <span class='object_link'><a href="ApplicationController.html#require_org-instance_method" title="ApplicationController#require_org (method)">#require_org</a></span>, <span class='object_link'><a href="ApplicationController.html#require_user-instance_method" title="ApplicationController#require_user (method)">#require_user</a></span>, <span class='object_link'><a href="ApplicationController.html#retain_search_history-instance_method" title="ApplicationController#retain_search_history (method)">#retain_search_history</a></span>, <span class='object_link'><a href="ApplicationController.html#search_validate-instance_method" title="ApplicationController#search_validate (method)">#search_validate</a></span>, <span class='object_link'><a href="ApplicationController.html#set_layout-instance_method" title="ApplicationController#set_layout (method)">#set_layout</a></span>, <span class='object_link'><a href="ApplicationController.html#setup_environment_selector-instance_method" title="ApplicationController#setup_environment_selector (method)">#setup_environment_selector</a></span>, <span class='object_link'><a href="ApplicationController.html#verify_ldap-instance_method" title="ApplicationController#verify_ldap (method)">#verify_ldap</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Menu.html" title="Menu (module)">Menu</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Menu.html#included-class_method" title="Menu.included (method)">included</a></span>, <span class='object_link'><a href="Menu.html#prune_menu-instance_method" title="Menu#prune_menu (method)">#prune_menu</a></span>, <span class='object_link'><a href="Menu.html#render_admin_menu-instance_method" title="Menu#render_admin_menu (method)">#render_admin_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_menu-instance_method" title="Menu#render_main_menu (method)">#render_main_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_sub_menu-instance_method" title="Menu#render_main_sub_menu (method)">#render_main_sub_menu</a></span>, <span class='object_link'><a href="Menu.html#render_menu-instance_method" title="Menu#render_menu (method)">#render_menu</a></span>, <span class='object_link'><a href="Menu.html#render_notifications_menu-instance_method" title="Menu#render_notifications_menu (method)">#render_notifications_menu</a></span>, <span class='object_link'><a href="Menu.html#render_sublevel_menu-instance_method" title="Menu#render_sublevel_menu (method)">#render_sublevel_menu</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="AuthorizationRules.html" title="AuthorizationRules (module)">AuthorizationRules</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="AuthorizationRules.html#authorize-instance_method" title="AuthorizationRules#authorize (method)">#authorize</a></span>, <span class='object_link'><a href="AuthorizationRules.html#build_bad_params_error_msg-instance_method" title="AuthorizationRules#build_bad_params_error_msg (method)">#build_bad_params_error_msg</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_array_params-instance_method" title="AuthorizationRules#check_array_params (method)">#check_array_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_hash_params-instance_method" title="AuthorizationRules#check_hash_params (method)">#check_hash_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#included-class_method" title="AuthorizationRules.included (method)">included</a></span>, <span class='object_link'><a href="AuthorizationRules.html#param_rules-instance_method" title="AuthorizationRules#param_rules (method)">#param_rules</a></span>, <span class='object_link'><a href="AuthorizationRules.html#params_match-instance_method" title="AuthorizationRules#params_match (method)">#params_match</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Util/ThreadSession/Controller.html" title="Util::ThreadSession::Controller (module)">Util::ThreadSession::Controller</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Util/ThreadSession/Controller.html#included-class_method" title="Util::ThreadSession::Controller.included (method)">included</a></span>, <span class='object_link'><a href="Util/ThreadSession/Controller.html#thread_locals-instance_method" title="Util::ThreadSession::Controller#thread_locals (method)">#thread_locals</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Locale.html" title="Locale (module)">Locale</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Locale.html#included-class_method" title="Locale.included (method)">included</a></span>, <span class='object_link'><a href="Locale.html#parse_accept_locale-instance_method" title="Locale#parse_accept_locale (method)">#parse_accept_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-instance_method" title="Locale#pick_available_locale (method)">#pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-class_method" title="Locale.pick_available_locale (method)">pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-instance_method" title="Locale#set_locale (method)">#set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-class_method" title="Locale.set_locale (method)">set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale_from_header-instance_method" title="Locale#set_locale_from_header (method)">#set_locale_from_header</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Profiling.html" title="Profiling (module)">Profiling</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Profiling.html#do_profiling-instance_method" title="Profiling#do_profiling (method)">#do_profiling</a></span>, <span class='object_link'><a href="Profiling.html#included-class_method" title="Profiling.included (method)">included</a></span>, <span class='object_link'><a href="Profiling.html#load_ruby_prof_gem-class_method" title="Profiling.load_ruby_prof_gem (method)">load_ruby_prof_gem</a></span>, <span class='object_link'><a href="Profiling.html#profiling_enabled%3F-class_method" title="Profiling.profiling_enabled? (method)">profiling_enabled?</a></span>, <span class='object_link'><a href="Profiling.html#run_profiling%3F-instance_method" title="Profiling#run_profiling? (method)">#run_profiling?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Notifications/ControllerHelper.html" title="Notifications::ControllerHelper (module)">Notifications::ControllerHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Notifications/ControllerHelper.html#default_notify_options-instance_method" title="Notifications::ControllerHelper#default_notify_options (method)">#default_notify_options</a></span>, <span class='object_link'><a href="Notifications/ControllerHelper.html#notify-instance_method" title="Notifications::ControllerHelper#notify (method)">#notify</a></span></p>

  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add-instance_method">
  
    - (<tt>Object</tt>) <strong>add</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add'>add</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='comment'># user entered one or more package names (as comma-separated list) in the content box
</span>    <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Package</span><span class='period'>.</span><span class='id identifier rubyid_validate_package_list_format'>validate_package_list_format</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_packages'>packages</span>
      <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_install_packages'>install_packages</span> <span class='id identifier rubyid_packages'>packages</span>
      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Install of Packages '%{p}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                         <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:p</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>One or more errors found in Package names '%s'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='kw'>and</span> <span class='kw'>return</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='comment'># user entered one or more package group names (as comma-separated list) in the content box
</span>    <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> *, *</span><span class='regexp_end'>/</span></span> <span class='rparen'>)</span>
    <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_install_package_groups'>install_package_groups</span> <span class='id identifier rubyid_groups'>groups</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Install of Package Groups '%{g}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                       <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:g</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Empty request received to install Packages or Package Groups for System '%s'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                     <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="controller_display_name-instance_method">
  
    - (<tt>Object</tt>) <strong>controller_display_name</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>system</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_system-instance_method">
  
    - (<tt>Object</tt>) <strong>find_system</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_system'>find_system</span>
  <span class='ivar'>@system</span> <span class='op'>=</span> <span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:system_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="more_packages-instance_method">
  
    - (<tt>Object</tt>) <strong>more_packages</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_more_packages'>more_packages</span>
  <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_simple_packages'>simple_packages</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_nvrea'>nvrea</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_nvrea'>nvrea</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='symbol'>:pkg_order</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:pkg_order</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>desc</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_reverse!'>reverse!</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>package_items</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:packages</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_packages'>packages</span><span class='comma'>,</span> <span class='symbol'>:package_tasks</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
                                              <span class='symbol'>:group_tasks</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:offset</span><span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
                                              <span class='symbol'>:editable</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="package_status-instance_method">
  
    - (<tt>Object</tt>) <strong>package_status</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_package_status'>package_status</span>
  <span class='comment'># retrieve the status for the package actions initiated by the client
</span>  <span class='id identifier rubyid_statuses'>statuses</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                 <span class='symbol'>:task_type</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:package_install</span><span class='comma'>,</span> <span class='symbol'>:package_update</span><span class='comma'>,</span> <span class='symbol'>:package_remove</span><span class='comma'>,</span>
                                                <span class='symbol'>:package_group_install</span><span class='comma'>,</span> <span class='symbol'>:package_group_remove</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_statuses'>statuses</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="packages-instance_method">
  
    - (<tt>Object</tt>) <strong>packages</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_packages'>packages</span>
  <span class='kw'>if</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Hypervisor</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>systems/hypervisor</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
           <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:system</span><span class='op'>=&gt;</span><span class='ivar'>@system</span><span class='comma'>,</span>
                     <span class='symbol'>:message</span><span class='op'>=&gt;</span><span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hypervisors do not have packages</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span>
  <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_simple_packages'>simple_packages</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_nvrea'>nvrea</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_nvrea'>nvrea</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_total_packages'>total_packages</span> <span class='op'>=</span> <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_total_packages'>total_packages</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='symbol'>:pkg_order</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:pkg_order</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>desc</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_reverse!'>reverse!</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_package_tasks'>package_tasks</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:task_type</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:package_install</span><span class='comma'>,</span> <span class='symbol'>:package_update</span><span class='comma'>,</span> <span class='symbol'>:package_remove</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                      <span class='symbol'>:state</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:waiting</span><span class='comma'>,</span> <span class='symbol'>:running</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_group_tasks'>group_tasks</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_tasks'>tasks</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:task_type</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:package_group_install</span><span class='comma'>,</span> <span class='symbol'>:package_group_remove</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='symbol'>:state</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:waiting</span><span class='comma'>,</span> <span class='symbol'>:running</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>packages</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:system</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='comma'>,</span> <span class='symbol'>:packages</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_packages'>packages</span><span class='comma'>,</span>
                                         <span class='symbol'>:total_packages</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_total_packages'>total_packages</span><span class='comma'>,</span>
                                                                     <span class='symbol'>:package_tasks</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_package_tasks'>package_tasks</span><span class='comma'>,</span>
                                                                     <span class='symbol'>:group_tasks</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_group_tasks'>group_tasks</span><span class='comma'>,</span>
                                                                     <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='symbol'>:editable</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove-instance_method">
  
    - (<tt>Object</tt>) <strong>remove</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove'>remove</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:package</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># user selected one or more packages from the list of installed packages
</span>    <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:package</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
    <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_uninstall_packages'>uninstall_packages</span> <span class='id identifier rubyid_packages'>packages</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Uninstall of Packages '%{p}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                       <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:p</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='comment'># user entered one or more package names (as comma-separated list) in the content box
</span>    <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='const'>Util</span><span class='op'>::</span><span class='const'>Package</span><span class='period'>.</span><span class='id identifier rubyid_validate_package_list_format'>validate_package_list_format</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_packages'>packages</span>
      <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_uninstall_packages'>uninstall_packages</span> <span class='id identifier rubyid_packages'>packages</span>
      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Uninstall of Packages '%{p}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                         <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:p</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>One or more errors found in Package names '%s'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:packages</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='kw'>and</span> <span class='kw'>return</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='comment'># user entered one or more package group names (as comma-separated list) in the content box
</span>    <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> *, *</span><span class='regexp_end'>/</span></span> <span class='rparen'>)</span>
    <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_uninstall_package_groups'>uninstall_package_groups</span> <span class='id identifier rubyid_groups'>groups</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Uninstall of Package Groups '%{p}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                       <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:p</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Empty request received to uninstall Packages or Package Groups for System '%s'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                     <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rules-instance_method">
  
    - (<tt>Object</tt>) <strong>rules</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rules'>rules</span>
  <span class='id identifier rubyid_edit_system'>edit_system</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span><span class='lbrace'>{</span><span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:system_id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_read_system'>read_system</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span><span class='lbrace'>{</span><span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:system_id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span><span class='rbrace'>}</span>

  <span class='lbrace'>{</span>
    <span class='symbol'>:packages</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_system'>read_system</span><span class='comma'>,</span>
    <span class='symbol'>:more_packages</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_system'>read_system</span><span class='comma'>,</span>
    <span class='symbol'>:add</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_system'>edit_system</span><span class='comma'>,</span>
    <span class='symbol'>:remove</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_system'>edit_system</span><span class='comma'>,</span>
    <span class='symbol'>:update</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_system'>edit_system</span><span class='comma'>,</span>
    <span class='symbol'>:package_status</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_system'>edit_system</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="section_id-instance_method">
  
    - (<tt>Object</tt>) <strong>section_id</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_section_id'>section_id</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>systems</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sort_order_limit-instance_method">
  
    - (<tt>Object</tt>) <strong>sort_order_limit</strong>(systems)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sort_order_limit'>sort_order_limit</span> <span class='id identifier rubyid_systems'>systems</span>
    <span class='id identifier rubyid_sort_columns'>sort_columns</span><span class='lparen'>(</span><span class='const'>COLUMNS</span><span class='comma'>,</span> <span class='id identifier rubyid_systems'>systems</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:order</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>||=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='id identifier rubyid_offset'>offset</span> <span class='op'>+</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span>
    <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='id identifier rubyid_systems'>systems</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='kw'>if</span> <span class='id identifier rubyid_last'>last</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_systems'>systems</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_systems'>systems</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='op'>...</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    - (<tt>Object</tt>) <strong>update</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/system_packages_controller.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>
  <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:package</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># user selected one or more packages from the list of installed packages
</span>    <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:package</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@system</span><span class='period'>.</span><span class='id identifier rubyid_update_packages'>update_packages</span> <span class='id identifier rubyid_packages'>packages</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Update of all packages scheduled for System '%s'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Update of Packages '%{p}' scheduled for System '%{s}'.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>%</span>
                       <span class='lbrace'>{</span> <span class='symbol'>:s</span> <span class='op'>=&gt;</span> <span class='ivar'>@system</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:p</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:package</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jun  6 11:24:52 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.1 (ruby-1.9.3).
</div>

  </body>
</html>