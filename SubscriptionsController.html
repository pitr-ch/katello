<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: SubscriptionsController
  
    &mdash; Katello
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SubscriptionsController</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: SubscriptionsController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">SubscriptionsController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">
      <a href="https://github.com/Katello/katello/tree/master/app/controllers/subscriptions_controller.rb" target="_blank">
        app/controllers/subscriptions_controller.rb
      </a>
    </dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="COLUMNS-constant" class="">COLUMNS =
          <div class="docstring">
  <div class="discussion">
    <p>two pane columns and mapping for sortable fields</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name_sort</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#consumers-instance_method" title="#consumers (instance method)">- (Object) <strong>consumers</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#controller_display_name-instance_method" title="#controller_display_name (instance method)">- (Object) <strong>controller_display_name</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#create_temp_file-instance_method" title="#create_temp_file (instance method)">- (Object) <strong>create_temp_file</strong>(prefix) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_manifest-instance_method" title="#delete_manifest (instance method)">- (Object) <strong>delete_manifest</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#edit-instance_method" title="#edit (instance method)">- (Object) <strong>edit</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#edit_manifest-instance_method" title="#edit_manifest (instance method)">- (Object) <strong>edit_manifest</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#find_or_create_temp_dir-instance_method" title="#find_or_create_temp_dir (instance method)">- (Object) <strong>find_or_create_temp_dir</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#find_provider-instance_method" title="#find_provider (instance method)">- (Object) <strong>find_provider</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#find_subscription-instance_method" title="#find_subscription (instance method)">- (Object) <strong>find_subscription</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#get_manifest_details-instance_method" title="#get_manifest_details (instance method)">- (Object) <strong>get_manifest_details</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#history-instance_method" title="#history (instance method)">- (Object) <strong>history</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#history_items-instance_method" title="#history_items (instance method)">- (Object) <strong>history_items</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index-instance_method" title="#index (instance method)">- (Object) <strong>index</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#items-instance_method" title="#items (instance method)">- (Object) <strong>items</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-instance_method" title="#new (instance method)">- (Object) <strong>new</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#param_rules-instance_method" title="#param_rules (instance method)">- (Object) <strong>param_rules</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#products-instance_method" title="#products (instance method)">- (Object) <strong>products</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh_manifest-instance_method" title="#refresh_manifest (instance method)">- (Object) <strong>refresh_manifest</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rules-instance_method" title="#rules (instance method)">- (Object) <strong>rules</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#section_id-instance_method" title="#section_id (instance method)">- (Object) <strong>section_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_options-instance_method" title="#setup_options (instance method)">- (Object) <strong>setup_options</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show-instance_method" title="#show (instance method)">- (Object) <strong>show</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#split_order-instance_method" title="#split_order (instance method)">- (Object) <strong>split_order</strong>(order) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload-instance_method" title="#upload (instance method)">- (Object) <strong>upload</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationController.html#check_deleted_org-instance_method" title="ApplicationController#check_deleted_org (method)">#check_deleted_org</a></span>, <span class='object_link'><a href="ApplicationController.html#current_organization-instance_method" title="ApplicationController#current_organization (method)">#current_organization</a></span>, <span class='object_link'><a href="ApplicationController.html#current_organization%3D-instance_method" title="ApplicationController#current_organization= (method)">#current_organization=</a></span>, <span class='object_link'><a href="ApplicationController.html#current_user-instance_method" title="ApplicationController#current_user (method)">#current_user</a></span>, <span class='object_link'><a href="ApplicationController.html#default_label-instance_method" title="ApplicationController#default_label (method)">#default_label</a></span>, <span class='object_link'><a href="ApplicationController.html#default_label_assigned-instance_method" title="ApplicationController#default_label_assigned (method)">#default_label_assigned</a></span>, <span class='object_link'><a href="ApplicationController.html#default_notify_options-instance_method" title="ApplicationController#default_notify_options (method)">#default_notify_options</a></span>, <span class='object_link'><a href="ApplicationController.html#environment_path_element-instance_method" title="ApplicationController#environment_path_element (method)">#environment_path_element</a></span>, <span class='object_link'><a href="ApplicationController.html#environment_paths-instance_method" title="ApplicationController#environment_paths (method)">#environment_paths</a></span>, <span class='object_link'><a href="ApplicationController.html#escape_html-instance_method" title="ApplicationController#escape_html (method)">#escape_html</a></span>, <span class='object_link'><a href="ApplicationController.html#execute_after_filters-instance_method" title="ApplicationController#execute_after_filters (method)">#execute_after_filters</a></span>, <span class='object_link'><a href="ApplicationController.html#execute_rescue-instance_method" title="ApplicationController#execute_rescue (method)">#execute_rescue</a></span>, <span class='object_link'><a href="ApplicationController.html#first_env_in_path-instance_method" title="ApplicationController#first_env_in_path (method)">#first_env_in_path</a></span>, <span class='object_link'><a href="ApplicationController.html#flash_to_headers-instance_method" title="ApplicationController#flash_to_headers (method)">#flash_to_headers</a></span>, <span class='object_link'><a href="ApplicationController.html#format_time-instance_method" title="ApplicationController#format_time (method)">#format_time</a></span>, <span class='object_link'><a href="ApplicationController.html#generate_label-instance_method" title="ApplicationController#generate_label (method)">#generate_label</a></span>, <span class='object_link'><a href="ApplicationController.html#label_overridden-instance_method" title="ApplicationController#label_overridden (method)">#label_overridden</a></span>, <span class='object_link'><a href="ApplicationController.html#library_path_element-instance_method" title="ApplicationController#library_path_element (method)">#library_path_element</a></span>, <span class='object_link'><a href="ApplicationController.html#log_exception-instance_method" title="ApplicationController#log_exception (method)">#log_exception</a></span>, <span class='object_link'><a href="ApplicationController.html#matches_no_redirect%3F-instance_method" title="ApplicationController#matches_no_redirect? (method)">#matches_no_redirect?</a></span>, <span class='object_link'><a href="ApplicationController.html#n_gettext_for_generate_label-instance_method" title="ApplicationController#n_gettext_for_generate_label (method)">#n_gettext_for_generate_label</a></span>, <span class='object_link'><a href="ApplicationController.html#no_env_available_msg-instance_method" title="ApplicationController#no_env_available_msg (method)">#no_env_available_msg</a></span>, <span class='object_link'><a href="ApplicationController.html#org_not_found_error-instance_method" title="ApplicationController#org_not_found_error (method)">#org_not_found_error</a></span>, <span class='object_link'><a href="ApplicationController.html#parse_calendar_date-instance_method" title="ApplicationController#parse_calendar_date (method)">#parse_calendar_date</a></span>, <span class='object_link'><a href="ApplicationController.html#parse_display_message-class_method" title="ApplicationController.parse_display_message (method)">parse_display_message</a></span>, <span class='object_link'><a href="ApplicationController.html#render_403-instance_method" title="ApplicationController#render_403 (method)">#render_403</a></span>, <span class='object_link'><a href="ApplicationController.html#render_404-instance_method" title="ApplicationController#render_404 (method)">#render_404</a></span>, <span class='object_link'><a href="ApplicationController.html#render_bad_parameters-instance_method" title="ApplicationController#render_bad_parameters (method)">#render_bad_parameters</a></span>, <span class='object_link'><a href="ApplicationController.html#render_correct_nav-instance_method" title="ApplicationController#render_correct_nav (method)">#render_correct_nav</a></span>, <span class='object_link'><a href="ApplicationController.html#render_error-instance_method" title="ApplicationController#render_error (method)">#render_error</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_direct-instance_method" title="ApplicationController#render_panel_direct (method)">#render_panel_direct</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_items-instance_method" title="ApplicationController#render_panel_items (method)">#render_panel_items</a></span>, <span class='object_link'><a href="ApplicationController.html#render_panel_results-instance_method" title="ApplicationController#render_panel_results (method)">#render_panel_results</a></span>, <span class='object_link'><a href="ApplicationController.html#requested_action-instance_method" title="ApplicationController#requested_action (method)">#requested_action</a></span>, <span class='object_link'><a href="ApplicationController.html#require_no_user-instance_method" title="ApplicationController#require_no_user (method)">#require_no_user</a></span>, <span class='object_link'><a href="ApplicationController.html#require_org-instance_method" title="ApplicationController#require_org (method)">#require_org</a></span>, <span class='object_link'><a href="ApplicationController.html#require_user-instance_method" title="ApplicationController#require_user (method)">#require_user</a></span>, <span class='object_link'><a href="ApplicationController.html#retain_search_history-instance_method" title="ApplicationController#retain_search_history (method)">#retain_search_history</a></span>, <span class='object_link'><a href="ApplicationController.html#search_validate-instance_method" title="ApplicationController#search_validate (method)">#search_validate</a></span>, <span class='object_link'><a href="ApplicationController.html#set_layout-instance_method" title="ApplicationController#set_layout (method)">#set_layout</a></span>, <span class='object_link'><a href="ApplicationController.html#setup_environment_selector-instance_method" title="ApplicationController#setup_environment_selector (method)">#setup_environment_selector</a></span>, <span class='object_link'><a href="ApplicationController.html#verify_ldap-instance_method" title="ApplicationController#verify_ldap (method)">#verify_ldap</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Menu.html" title="Menu (module)">Menu</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Menu.html#included-class_method" title="Menu.included (method)">included</a></span>, <span class='object_link'><a href="Menu.html#prune_menu-instance_method" title="Menu#prune_menu (method)">#prune_menu</a></span>, <span class='object_link'><a href="Menu.html#render_admin_menu-instance_method" title="Menu#render_admin_menu (method)">#render_admin_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_menu-instance_method" title="Menu#render_main_menu (method)">#render_main_menu</a></span>, <span class='object_link'><a href="Menu.html#render_main_sub_menu-instance_method" title="Menu#render_main_sub_menu (method)">#render_main_sub_menu</a></span>, <span class='object_link'><a href="Menu.html#render_menu-instance_method" title="Menu#render_menu (method)">#render_menu</a></span>, <span class='object_link'><a href="Menu.html#render_notifications_menu-instance_method" title="Menu#render_notifications_menu (method)">#render_notifications_menu</a></span>, <span class='object_link'><a href="Menu.html#render_sublevel_menu-instance_method" title="Menu#render_sublevel_menu (method)">#render_sublevel_menu</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="AuthorizationRules.html" title="AuthorizationRules (module)">AuthorizationRules</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="AuthorizationRules.html#authorize-instance_method" title="AuthorizationRules#authorize (method)">#authorize</a></span>, <span class='object_link'><a href="AuthorizationRules.html#build_bad_params_error_msg-instance_method" title="AuthorizationRules#build_bad_params_error_msg (method)">#build_bad_params_error_msg</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_array_params-instance_method" title="AuthorizationRules#check_array_params (method)">#check_array_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#check_hash_params-instance_method" title="AuthorizationRules#check_hash_params (method)">#check_hash_params</a></span>, <span class='object_link'><a href="AuthorizationRules.html#included-class_method" title="AuthorizationRules.included (method)">included</a></span>, <span class='object_link'><a href="AuthorizationRules.html#params_match-instance_method" title="AuthorizationRules#params_match (method)">#params_match</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Util/ThreadSession/Controller.html" title="Util::ThreadSession::Controller (module)">Util::ThreadSession::Controller</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Util/ThreadSession/Controller.html#included-class_method" title="Util::ThreadSession::Controller.included (method)">included</a></span>, <span class='object_link'><a href="Util/ThreadSession/Controller.html#thread_locals-instance_method" title="Util::ThreadSession::Controller#thread_locals (method)">#thread_locals</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Locale.html" title="Locale (module)">Locale</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Locale.html#included-class_method" title="Locale.included (method)">included</a></span>, <span class='object_link'><a href="Locale.html#parse_accept_locale-instance_method" title="Locale#parse_accept_locale (method)">#parse_accept_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-instance_method" title="Locale#pick_available_locale (method)">#pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#pick_available_locale-class_method" title="Locale.pick_available_locale (method)">pick_available_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-instance_method" title="Locale#set_locale (method)">#set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale-class_method" title="Locale.set_locale (method)">set_locale</a></span>, <span class='object_link'><a href="Locale.html#set_locale_from_header-instance_method" title="Locale#set_locale_from_header (method)">#set_locale_from_header</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Profiling.html" title="Profiling (module)">Profiling</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Profiling.html#do_profiling-instance_method" title="Profiling#do_profiling (method)">#do_profiling</a></span>, <span class='object_link'><a href="Profiling.html#included-class_method" title="Profiling.included (method)">included</a></span>, <span class='object_link'><a href="Profiling.html#load_ruby_prof_gem-class_method" title="Profiling.load_ruby_prof_gem (method)">load_ruby_prof_gem</a></span>, <span class='object_link'><a href="Profiling.html#profiling_enabled%3F-class_method" title="Profiling.profiling_enabled? (method)">profiling_enabled?</a></span>, <span class='object_link'><a href="Profiling.html#run_profiling%3F-instance_method" title="Profiling#run_profiling? (method)">#run_profiling?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Notifications/ControllerHelper.html" title="Notifications::ControllerHelper (module)">Notifications::ControllerHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Notifications/ControllerHelper.html#default_notify_options-instance_method" title="Notifications::ControllerHelper#default_notify_options (method)">#default_notify_options</a></span>, <span class='object_link'><a href="Notifications/ControllerHelper.html#notify-instance_method" title="Notifications::ControllerHelper#notify (method)">#notify</a></span></p>

  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="consumers-instance_method">
  
    - (<tt>Object</tt>) <strong>consumers</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consumers'>consumers</span>
  <span class='id identifier rubyid_systems'>systems</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_systems'>systems</span><span class='period'>.</span><span class='id identifier rubyid_readable'>readable</span><span class='lparen'>(</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_systems'>systems</span> <span class='op'>=</span> <span class='id identifier rubyid_systems'>systems</span><span class='period'>.</span><span class='id identifier rubyid_all_by_pool'>all_by_pool</span><span class='lparen'>(</span><span class='ivar'>@subscription</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_activation_keys'>activation_keys</span> <span class='op'>=</span> <span class='const'>ActivationKey</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:pools</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pools.cp_id</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='ivar'>@subscription</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_readable'>readable</span><span class='lparen'>(</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_activation_keys'>activation_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_activation_keys'>activation_keys</span>

  <span class='id identifier rubyid_distributors'>distributors</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_distributors'>distributors</span><span class='period'>.</span><span class='id identifier rubyid_readable'>readable</span><span class='lparen'>(</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_distributors'>distributors</span> <span class='op'>=</span> <span class='id identifier rubyid_distributors'>distributors</span><span class='period'>.</span><span class='id identifier rubyid_all_by_pool'>all_by_pool</span><span class='lparen'>(</span><span class='ivar'>@subscription</span><span class='period'>.</span><span class='id identifier rubyid_cp_id'>cp_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>consumers</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:subscription</span><span class='op'>=&gt;</span><span class='ivar'>@subscription</span><span class='comma'>,</span> <span class='symbol'>:systems</span><span class='op'>=&gt;</span><span class='id identifier rubyid_systems'>systems</span><span class='comma'>,</span> <span class='symbol'>:activation_keys</span><span class='op'>=&gt;</span><span class='id identifier rubyid_activation_keys'>activation_keys</span><span class='comma'>,</span> <span class='symbol'>:distributors</span><span class='op'>=&gt;</span><span class='id identifier rubyid_distributors'>distributors</span><span class='comma'>,</span> <span class='symbol'>:editable</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="controller_display_name-instance_method">
  
    - (<tt>Object</tt>) <strong>controller_display_name</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>subscription</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_temp_file-instance_method">
  
    - (<tt>Object</tt>) <strong>create_temp_file</strong>(prefix)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260
261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_temp_file'>create_temp_file</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rparen'>)</span>
  <span class='comment'># default external encoding in Ruby 1.9.3 is UTF-8, need to specify that we are opening a binary file (ASCII-8BIT encoding)
</span>  <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_find_or_create_temp_dir'>find_or_create_temp_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rbrace'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_hex'>hex</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>.zip</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>wb+</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>0600</span><span class='rparen'>)</span>

  <span class='kw'>yield</span> <span class='id identifier rubyid_f'>f</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>unless</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_manifest-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_manifest</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_manifest'>delete_manifest</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_delete_manifest'>delete_manifest</span> <span class='symbol'>:async</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:notify</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:response</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='const'>ApplicationController</span><span class='period'>.</span><span class='id identifier rubyid_parse_display_message'>parse_display_message</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_delete_error_message'>delete_error_message</span><span class='lparen'>(</span><span class='id identifier rubyid_display_message'>display_message</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>state</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>running</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="edit-instance_method">
  
    - (<tt>Object</tt>) <strong>edit</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edit'>edit</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>edit</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:subscription</span> <span class='op'>=&gt;</span> <span class='ivar'>@subscription</span><span class='comma'>,</span> <span class='symbol'>:editable</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="edit_manifest-instance_method">
  
    - (<tt>Object</tt>) <strong>edit_manifest</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edit_manifest'>edit_manifest</span>
  <span class='id identifier rubyid_get_manifest_details'>get_manifest_details</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>edit_manifest</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:provider</span><span class='op'>=&gt;</span><span class='ivar'>@provider</span><span class='comma'>,</span> <span class='symbol'>:statuses</span><span class='op'>=&gt;</span><span class='ivar'>@statuses</span><span class='comma'>,</span> <span class='symbol'>:details</span><span class='op'>=&gt;</span><span class='ivar'>@details</span><span class='comma'>,</span> <span class='symbol'>:upstream</span><span class='op'>=&gt;</span><span class='ivar'>@upstream</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_or_create_temp_dir-instance_method">
  
    - (<tt>Object</tt>) <strong>find_or_create_temp_dir</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_or_create_temp_dir'>find_or_create_temp_dir</span>
  <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='rbrace'>}</span><span class='tstring_content'>/tmp</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_mkdir'>mkdir</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='id identifier rubyid_dir'>dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_provider-instance_method">
  
    - (<tt>Object</tt>) <strong>find_provider</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_provider'>find_provider</span>
    <span class='ivar'>@provider</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_redhat_provider'>redhat_provider</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_subscription-instance_method">
  
    - (<tt>Object</tt>) <strong>find_subscription</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_subscription'>find_subscription</span>
  <span class='ivar'>@subscription</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Pool</span><span class='period'>.</span><span class='id identifier rubyid_find_pool'>find_pool</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_manifest_details-instance_method">
  
    - (<tt>Object</tt>) <strong>get_manifest_details</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_manifest_details'>get_manifest_details</span>
  <span class='ivar'>@details</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_owner_details'>owner_details</span>
  <span class='ivar'>@statuses</span> <span class='op'>=</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_owner_imports'>owner_imports</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@upstream</span> <span class='op'>=</span>  <span class='ivar'>@details</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>upstreamConsumer</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='ivar'>@details</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>upstreamConsumer</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>

  <span class='comment'># Put some manifest-specific information onto the consumer for use in the view
</span>  <span class='id identifier rubyid_import_status'>import_status</span> <span class='op'>=</span> <span class='ivar'>@statuses</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>upstreamId</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='ivar'>@upstream</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>uuid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_import_status'>import_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='ivar'>@upstream</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>generatedBy</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_import_status'>import_status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>generatedBy</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@upstream</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>generatedDate</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_import_status'>import_status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>generatedDate</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@upstream</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>fileName</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_import_status'>import_status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>fileName</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="history-instance_method">
  
    - (<tt>Object</tt>) <strong>history</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_history'>history</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@statuses</span> <span class='op'>=</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_owner_imports'>owner_imports</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='comment'># quietly ignore
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subscriptions/_history</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:provider</span><span class='op'>=&gt;</span><span class='ivar'>@provider</span><span class='comma'>,</span> <span class='symbol'>:statuses</span><span class='op'>=&gt;</span><span class='ivar'>@statuses</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="history_items-instance_method">
  
    - (<tt>Object</tt>) <strong>history_items</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_history_items'>history_items</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@statuses</span> <span class='op'>=</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_owner_imports'>owner_imports</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='ivar'>@statuses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_display_message'>parse_display_message</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_error_text'>error_text</span> <span class='op'>=</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to retrieve subscription history for provider '%{name}'.</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbrace'>{</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_error_text'>error_text</span> <span class='op'>+=</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%{newline}Reason: %{reason}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbrace'>{</span><span class='symbol'>:reason</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_display_message'>display_message</span><span class='comma'>,</span> <span class='symbol'>:newline</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_display_message'>display_message</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span> <span class='id identifier rubyid_error_text'>error_text</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='symbol'>:asynchronous</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error fetching subscription history from Candlepin</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_error'>error</span>
    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>history_items</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='symbol'>:bad_request</span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:provider</span><span class='op'>=&gt;</span><span class='ivar'>@provider</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='comma'>,</span> <span class='symbol'>:statuses</span><span class='op'>=&gt;</span><span class='ivar'>@statuses</span><span class='rbrace'>}</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>history_items</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:provider</span><span class='op'>=&gt;</span><span class='ivar'>@provider</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='comma'>,</span> <span class='symbol'>:statuses</span><span class='op'>=&gt;</span><span class='ivar'>@statuses</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="index-instance_method">
  
    - (<tt>Object</tt>) <strong>index</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_index'>index</span>

  <span class='comment'># If no manifest imported yet or one is currently being imported, open the &quot;new&quot; panel.
</span>  <span class='comment'># Originally had intended to open the &quot;new&quot; panel when last import was an error, but this
</span>  <span class='comment'># is too restrictive, preventing viewing of previously imported subscriptions.
</span>  <span class='kw'>if</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span>
    <span class='id identifier rubyid_details'>details</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_owner_details'>owner_details</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_details'>details</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>upstreamUuid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_details'>details</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>upstreamUuid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='op'>||</span>
        <span class='lparen'>(</span><span class='op'>!</span><span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_task_status'>task_status</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_task_status'>task_status</span><span class='period'>.</span><span class='id identifier rubyid_finish_time'>finish_time</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='ivar'>@panel_options</span><span class='lbracket'>[</span><span class='symbol'>:initial_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:panel</span> <span class='op'>=&gt;</span> <span class='symbol'>:new</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="items-instance_method">
  
    - (<tt>Object</tt>) <strong>items</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_items'>items</span>
  <span class='id identifier rubyid_order'>order</span> <span class='op'>=</span> <span class='id identifier rubyid_split_order'>split_order</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:order</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_search'>search</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:search</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>||</span> <span class='int'>0</span>
  <span class='id identifier rubyid_filters'>filters</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># Without any search terms, all subscriptions for an org are queried directly from candlepin instead of
</span>  <span class='comment'># hitting elastic search. This is important since this is then only time subscriptions get reindexed
</span>  <span class='comment'># currently.
</span>  <span class='comment'># Note: This does open the possibility that the elastic search contents will be out of date compared to
</span>  <span class='comment'>#       what is actually in candlepin. This could only happen, though, if the user was performing a
</span>  <span class='comment'>#       search and didn't refresh the page while the data was changing behind the scenes. Until this
</span>  <span class='comment'>#       becomes a specific issue, re-indexing will not be performed constantly.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_search'>search</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_subscriptions'>subscriptions</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_redhat_provider'>redhat_provider</span><span class='period'>.</span><span class='id identifier rubyid_index_subscriptions'>index_subscriptions</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_offset'>offset</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>and</span> <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_render_panel_items'>render_panel_items</span><span class='lparen'>(</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='ivar'>@panel_options</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'># Limit subscriptions to current org and Red Hat provider
</span>    <span class='id identifier rubyid_filters'>filters</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:org</span><span class='op'>=&gt;</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='symbol'>:provider_id</span><span class='op'>=&gt;</span><span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_redhat_provider'>redhat_provider</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_search_results'>search_results</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Pool</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='id identifier rubyid_search'>search</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_page_size'>page_size</span><span class='comma'>,</span> <span class='id identifier rubyid_filters'>filters</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results_total'>results_total</span> <span class='op'>=</span> <span class='id identifier rubyid_search_results'>search_results</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='id identifier rubyid_search_results'>search_results</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span>
    <span class='id identifier rubyid_render_panel_results'>render_panel_results</span><span class='lparen'>(</span><span class='id identifier rubyid_search_results'>search_results</span><span class='comma'>,</span> <span class='id identifier rubyid_results_total'>results_total</span><span class='comma'>,</span> <span class='ivar'>@panel_options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new-instance_method">
  
    - (<tt>Object</tt>) <strong>new</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_get_manifest_details'>get_manifest_details</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:provider</span><span class='op'>=&gt;</span><span class='ivar'>@provider</span><span class='comma'>,</span> <span class='symbol'>:statuses</span><span class='op'>=&gt;</span><span class='ivar'>@statuses</span><span class='comma'>,</span> <span class='symbol'>:details</span><span class='op'>=&gt;</span><span class='ivar'>@details</span><span class='comma'>,</span> <span class='symbol'>:upstream</span><span class='op'>=&gt;</span><span class='ivar'>@upstream</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="param_rules-instance_method">
  
    - (<tt>Object</tt>) <strong>param_rules</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_param_rules'>param_rules</span>
  <span class='lbrace'>{</span>
      <span class='comment'># empty
</span>  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="products-instance_method">
  
    - (<tt>Object</tt>) <strong>products</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_products'>products</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>products</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:subscription</span><span class='op'>=&gt;</span><span class='ivar'>@subscription</span><span class='comma'>,</span> <span class='symbol'>:editable</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh_manifest-instance_method">
  
    - (<tt>Object</tt>) <strong>refresh_manifest</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_refresh_manifest'>refresh_manifest</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_get_manifest_details'>get_manifest_details</span> <span class='comment'># to set @upstream
</span>    <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_refresh_manifest'>refresh_manifest</span> <span class='ivar'>@upstream</span><span class='comma'>,</span> <span class='symbol'>:async</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:notify</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:response</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='const'>ApplicationController</span><span class='period'>.</span><span class='id identifier rubyid_parse_display_message'>parse_display_message</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_refresh_error_message'>refresh_error_message</span><span class='lparen'>(</span><span class='id identifier rubyid_display_message'>display_message</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>state</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>running</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rules-instance_method">
  
    - (<tt>Object</tt>) <strong>rules</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rules'>rules</span>
  <span class='id identifier rubyid_read_provider_test'>read_provider_test</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span><span class='lbrace'>{</span><span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_edit_provider_test'>edit_provider_test</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span><span class='lbrace'>{</span><span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span><span class='rbrace'>}</span>
  <span class='lbrace'>{</span>
    <span class='symbol'>:index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:items</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:show</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:edit</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>  <span class='comment'># Note: edit is the callback for sliding out right panel
</span>    <span class='symbol'>:products</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:consumers</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:history</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:history_items</span><span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:new</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:upload</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_provider_test'>edit_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:refresh_manifest</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_provider_test'>edit_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:delete_manifest</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_edit_provider_test'>edit_provider_test</span><span class='comma'>,</span>
    <span class='symbol'>:edit_manifest</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_read_provider_test'>read_provider_test</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="section_id-instance_method">
  
    - (<tt>Object</tt>) <strong>section_id</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_section_id'>section_id</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>subscriptions</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_options-instance_method">
  
    - (<tt>Object</tt>) <strong>setup_options</strong>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_options'>setup_options</span>
  <span class='ivar'>@panel_options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Subscriptions</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                    <span class='symbol'>:col</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:titles</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:custom_rows</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                    <span class='symbol'>:enable_create</span> <span class='op'>=&gt;</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_editable?'>editable?</span><span class='comma'>,</span>
                    <span class='symbol'>:create_label</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+ Import Manifest</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                    <span class='symbol'>:enable_sort</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                    <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_display_name'>controller_display_name</span><span class='comma'>,</span>
                    <span class='symbol'>:list_partial</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>subscriptions/list_subscriptions</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                    <span class='symbol'>:ajax_load</span>  <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                    <span class='symbol'>:ajax_scroll</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_items_subscriptions_path'>items_subscriptions_path</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='comma'>,</span>
                    <span class='symbol'>:actions</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
                    <span class='symbol'>:search_class</span> <span class='op'>=&gt;</span> <span class='op'>::</span><span class='const'>Pool</span><span class='comma'>,</span>
                    <span class='symbol'>:accessor</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>unused</span><span class='tstring_end'>'</span></span>
                    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="show-instance_method">
  
    - (<tt>Object</tt>) <strong>show</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show'>show</span>
  <span class='ivar'>@provider</span> <span class='op'>=</span> <span class='id identifier rubyid_current_organization'>current_organization</span><span class='period'>.</span><span class='id identifier rubyid_redhat_provider'>redhat_provider</span>
  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:partial</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subscriptions/list_subscription_show</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='symbol'>:item</span><span class='op'>=&gt;</span><span class='ivar'>@subscription</span><span class='comma'>,</span> <span class='symbol'>:columns</span> <span class='op'>=&gt;</span> <span class='const'>COLUMNS</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='comma'>,</span> <span class='symbol'>:noblock</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="split_order-instance_method">
  
    - (<tt>Object</tt>) <strong>split_order</strong>(order)  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_split_order'>split_order</span> <span class='id identifier rubyid_order'>order</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_order'>order</span>
    <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
  <span class='kw'>else</span>
    <span class='lbracket'>[</span><span class='symbol'>:name_sort</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASC</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload-instance_method">
  
    - (<tt>Object</tt>) <strong>upload</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/subscriptions_controller.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upload'>upload</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:provider</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='kw'>and</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:provider</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='symbol'>:contents</span>
    <span class='id identifier rubyid_temp_file'>temp_file</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_temp_file_path'>temp_file_path</span> <span class='op'>=</span> <span class='id identifier rubyid_create_temp_file'>create_temp_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>import</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tmp'>tmp</span><span class='op'>|</span> <span class='id identifier rubyid_tmp'>tmp</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:provider</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:contents</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
      <span class='comment'># force must be a string value
</span>      <span class='id identifier rubyid_force_update'>force_update</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:force_import</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>false</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_import_manifest'>import_manifest</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_temp_file_path'>temp_file_path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_force_update'>force_update</span><span class='comma'>,</span>
                                <span class='symbol'>:async</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:notify</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
    <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:response</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='const'>ApplicationController</span><span class='period'>.</span><span class='id identifier rubyid_parse_display_message'>parse_display_message</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
        <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_display_message'>display_message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_exception'>exception</span> <span class='ivar'>@provider</span><span class='period'>.</span><span class='id identifier rubyid_import_error_message'>import_error_message</span><span class='lparen'>(</span><span class='id identifier rubyid_display_message'>display_message</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span>

      <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error uploading subscriptions.</span><span class='tstring_end'>&quot;</span></span>
      <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_error'>error</span>
      <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='comment'># Fall-through even on error so that the import history is refreshed
</span>    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'># user didn't provide a manifest to upload
</span>    <span class='id identifier rubyid_notify'>notify</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid__'>_</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Subscription manifest must be specified on upload.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_render'>render</span> <span class='symbol'>:json</span><span class='op'>=&gt;</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>state</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>running</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jun  6 11:24:47 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.1 (ruby-1.9.3).
</div>

  </body>
</html>